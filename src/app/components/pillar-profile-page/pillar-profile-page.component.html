<div class="container">
    <div class="pillar-info-container">
        <img class="pillar-avatar" *ngIf="pillarOffChainInfo?.avatar" [src]="pillarOffChainInfo?.avatar">
        <div class="name-and-social-links">
            <div class="pillar-name text-glow-white">{{ pillarName }}</div>
            <div class="social-links" *ngIf="hasSocialLinks">
                <a target="_blank" rel="noopener noreferrer" href={{pillarOffChainInfo?.links?.telegram}}
                    *ngIf="pillarOffChainInfo?.links?.telegram">
                    <img src="../../../assets/vectors/telegram_logo.svg" alt="Telegram logo">
                </a>
                <a target="_blank" rel="noopener noreferrer" href={{pillarOffChainInfo?.links?.twitter}}
                    *ngIf="pillarOffChainInfo?.links?.twitter">
                    <img src="../../../assets/vectors/twitter_logo.svg" alt="Twitter logo">
                </a>
                <a target="_blank" rel="noopener noreferrer" href={{pillarOffChainInfo?.links?.website}}
                    *ngIf="pillarOffChainInfo?.links?.website">
                    <img src="../../../assets/vectors/globe.svg" alt="Globe icon">
                </a>
                <a target="_blank" rel="noopener noreferrer" href={{pillarOffChainInfo?.links?.github}}
                    *ngIf="pillarOffChainInfo?.links?.github">
                    <img src="../../../assets/vectors/github_logo.svg" alt="Github logo">
                </a>
                <a target="_blank" rel="noopener noreferrer" href={{pillarOffChainInfo?.links?.medium}}
                    *ngIf="pillarOffChainInfo?.links?.medium">
                    <img src="../../../assets/vectors/medium_logo.svg" alt="Medium logo">
                </a>
            </div>
        </div>
    </div>

    <app-loader class="loader" *ngIf="isLoading"></app-loader>
    <div class="no-votes" *ngIf="!isLoading && !hasVotes">The Pillar hasn't voted.</div>
    <div *ngIf="!isLoading && hasVotes" class="table-container">
        <table mat-table [dataSource]="dataSource" fixedLayout="true" class="mat-elevation-z8">
            <ng-container matColumnDef="proposal">
                <th mat-header-cell *matHeaderCellDef>Proposal</th>
                <td mat-cell *matCellDef="let row">
                    <div class="proposal-cell">
                        <div class="phase-text" *ngIf="row.phaseName">{{row.phaseName.length > 40 ?
                            row.phaseName.slice(0,
                            40) + '...' : row.phaseName}}</div>
                        <div class="project-text" [class.project-text--is-phase]="row.phaseName">
                            {{row.projectName.length >
                            40 ? row.projectName.slice(0, 40) + '...' : row.projectName}}</div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="vote">
                <th mat-header-cell *matHeaderCellDef>Vote</th>
                <td mat-cell *matCellDef="let row">
                    <div class="vote-cell">
                        <div [innerHTML]="row.voteIconHex | twemoji"></div>
                        <div>{{row.vote}}</div>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="timestamp">
                <th mat-header-cell *matHeaderCellDef>Timestamp</th>
                <td mat-cell *matCellDef="let row"> {{row.timestamp * 1000 | date:'MM/dd/yy h:mm a'}} </td>
            </ng-container>

            <ng-container matColumnDef="url">
                <th mat-header-cell *matHeaderCellDef>URL</th>
                <td mat-cell *matCellDef="let row">
                    <a class="open-link-icon" target="_blank" rel="noopener noreferrer" href={{row.url}}>
                        <fa-icon [icon]="faArrowUpRightFromSquare" class="fa-lg"></fa-icon>
                    </a>
                </td>
            </ng-container>

            <ng-container matColumnDef="title">
                <th *matHeaderCellDef colspan="8">
                    <div class="table-title text-glow-white">Voting</div>
                    <div class="voting-icon" [innerHTML]="'1F5F3' | twemoji"></div>
                </th>
            </ng-container>

            <tr mat-header-row class="table-title-container" *matHeaderRowDef="['title']"></tr>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>